{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">

    <div class="p-3 bg-light rounded shadow mb-4">
        <h4 class="text-primary text-center mb-0">
            Hoş geldiniz, {{ user.first_name }}!
        </h4>
    </div>

    {% if user.role == "ogrenci" %}
        <div class="row mb-4">
            <div class="col-md-4 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">Notlarım</h6>
                    </div>
                    <div class="card-body text-center">
                        <h2>Not Ortalaması</h2>
                        <small>Bu dönem</small>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">Devamsızlık</h6>
                    </div>
                    <div class="card-body text-center">
                        <h2>{{ bugun_devamsizlik|default:0 }}</h2>
                        <small>Bu ay</small>
                    </div>
                </div>
            </div>  
            <!-- YENİ ÖDEV KARTI -->
            <div class="col-md-4 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">📚 Ödevlerim</h6>
                    </div>
                    <div class="card-body text-center">
                        <h2>{{ odev_sayisi|default:0 }}</h2>
                        <small>Aktif ödev</small>
                        <div class="mt-2">
                            <a href="{% url 'odevler:liste' %}" class="btn btn-light btn-sm">
                                Görüntüle
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        
        
        <div class="row mt-4">
            <div class="col-12 text-center">
                <a href="{% url 'not_gir:ogrenci_notlari' %}" class="btn btn-gradient-primary btn-lg mx-2 px-4">📝 Notlarım</a>
                <a href="{% url 'devamsizlik:ogrenci_devamsizliklari' %}" class="btn btn-info btn-lg mx-2 px-4">📅 Devamsızlıklarım</a>
                <a href="{% url 'odevler:liste' %}" class="btn btn-success btn-lg mx-2 px-4">📚 Ödevlerim</a>
                <a href="{% url 'duyurular:duyuru_listesi' %}" class="btn btn-warning btn-lg mx-2 px-4">📢 Duyurular</a>
                <a href="{% url 'dersler:haftalik_program' %}" class="btn btn-primary btn-lg mx-2 px-4">📅 Ders Programım</a>
            </div>
        </div>

    {% elif user.role == "ogretmen" %}
        <div class="row mb-4">
            <div class="col-md-4 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">Derslerim</h6>
                    </div>
                    <div class="card-body text-center">
                        <h2>{{ toplam_ders|default:0 }}</h2>
                        <small>Aktif ders</small>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">Öğrencilerim</h6>
                    </div>
                    <div class="card-body text-center">
                        <h2>{{ mevcut_ogrenci|default:0 }} / {{ toplam_ogrenci|default:0 }}</h2>
                        <small>Mevcut / Toplam öğrenci</small>
                    </div>
                </div>
            </div>
            
        
        <!-- YENİ ÖDEV KARTI -->
        <div class="col-md-3 mb-3">
            <div class="card text-white h-100 gradient-bg shadow">
                <div class="card-header border-0">
                    <h6 class="card-title mb-0">📚 Ödevler</h6>
                </div>
                <div class="card-body text-center">
                    <h2>{{ odev_sayisi|default:0 }}</h2>
                    <small>Verilen ödev</small>
                    <div class="mt-2">
                        <a href="{% url 'odevler:ekle' %}" class="btn btn-light btn-sm">
                            Yeni Ekle
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row mt-4">
        <div class="col-12 text-center">
            <a href="{% url 'not_gir:not_girisi' %}" class="btn btn-gradient-primary btn-lg mx-2 px-4">📝 Not Gir</a>
            <a href="{% url 'devamsizlik:yoklama_al' %}" class="btn btn-warning btn-lg mx-2 px-4">📋 Yoklama Al</a>
            <a href="{% url 'odevler:liste' %}" class="btn btn-success btn-lg mx-2 px-4">📚 Ödevlerim</a>
            <a href="{% url 'odevler:ekle' %}" class="btn btn-info btn-lg mx-2 px-4">➕ Ödev Ekle</a>
            <a href="{% url 'duyurular:duyuru_listesi' %}" class="btn btn-secondary btn-lg mx-2 px-4">📢 Duyurular</a>
            <a href="{% url 'dersler:haftalik_program' %}" class="btn btn-primary btn-lg mx-2 px-4">📅 Ders Programım</a>
        </div>
    </div>

    {% elif user.role in "superuser,mudur,mudur_yardimcisi" %}
        <!-- İLK SATIR -->
        <div class="row mb-4">
            <div class="col-md-3 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">Toplam Öğrenci</h6>
                    </div>
                    <div class="card-body text-center">
                        <h2>{{ mevcut_ogrenci|default:0 }} / {{ toplam_ogrenci|default:0 }}</h2>
                        <small>Mevcut / Toplam öğrenci</small>
                    </div>
                </div>
            </div>

            <div class="col-md-3 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">Aktif Dersler</h6>
                    </div>
                    <div class="card-body text-center">
                        <h2>{{ toplam_ders|default:0 }}</h2>
                        <small>Mevcut ders</small>
                    </div>
                </div>
            </div>

            <div class="col-md-3 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">📋 İzinli Personel</h6>
                    </div>
                    <div class="card-body text-center">
                        <h2>{{ izinli_sayi|default:0 }}</h2>
                        <small>Bugün izinli</small>
                        <div class="mt-2">
                            <a href="{% url 'personel_yonetimi:dashboard' %}" class="btn btn-light btn-sm">
                                Görüntüle
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-3 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">📢 Duyurular</h6>
                    </div>
                    <div class="card-body text-center">
                        <h2>{{ toplam_duyuru|default:0 }}</h2>
                        <small>Aktif duyuru</small>
                        <div class="mt-2">
                            <a href="{% url 'duyurular:duyuru_listesi' %}" class="btn btn-light btn-sm">
                                Görüntüle
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>  <!-- ← İLK SATIR KAPANDI -->

        <!-- İKİNCİ SATIR -->
        <div class="row mb-4">
            <div class="col-md-3 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">👥 Kullanıcı Yönetimi</h6>
                    </div>
                    <div class="card-body text-center">
                        <h2>{{ toplam_kullanici|default:0 }}</h2>
                        <small>Toplam kullanıcı</small>
                        <div class="mt-2">
                            <a href="/admin/users/customuser/add/" class="btn btn-light btn-sm">
                                Yeni Ekle
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-3 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">⚙️ Sistem Ayarları</h6>
                    </div>
                    <div class="card-body text-center">
                        <h5 class="mb-2">Admin Panel</h5>
                        <small>Tüm ayarlar</small>
                        <div class="mt-2">
                            <a href="/admin/" class="btn btn-light btn-sm">
                                Yönet
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-3 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">📊 Raporlar</h6>
                    </div>
                    <div class="card-body text-center">
                        <h5 class="mb-2">Okul Raporu</h5>
                        <small>İstatistikler</small>
                        <div class="mt-2">
                            <a href="#" class="btn btn-light btn-sm">
                                Görüntüle
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-3 mb-3">
            <div class="card text-white h-100 gradient-bg shadow">
                <div class="card-header border-0">
                    <h6 class="card-title mb-0">📅 Ders Programları</h6>
                </div>
                <div class="card-body text-center">
                    <h5 class="mb-2">Tüm Sınıflar</h5>
                    <small>Program görüntüle</small>
                    <div class="mt-2">
                        <a href="{% url 'dersler:program_admin_goruntule' %}" class="btn btn-light btn-sm">
                            Görüntüle
                        </a>
                    </div>
                </div>
            </div>
        </div>
        </div>  <!-- ← İKİNCİ SATIR KAPANDI -->


        <!-- Hızlı Erişim Butonları -->
        <div class="row mt-4">
            <div class="col-12 text-center">
                <a href="/admin/ogrenciler/sinifdersatama/" class="btn btn-gradient-primary btn-md mx-2 px-1">
                    📚 Sınıf-Ders Ataması
                </a>
                <a href="/admin/not_gir/dersnotu/" class="btn btn-info btn-md mx-2 px-1">
                    📝 Not Yönetimi
                </a>
                <a href="/admin/duyurular/duyuru/" class="btn btn-warning btn-md mx-2 px-1">
                    📢 Duyuru Yönetimi
                </a>
                <a href="/admin/users/customuser/" class="btn btn-success btn-md mx-2 px-1">
                    👥 Kullanıcı Listesi
                </a>
                <a href="{% url 'personel_yonetimi:dashboard' %}" class="btn btn-danger btn-md mx-2 px-1">
                    📋 Personel Yönetimi
                </a>
                <a href="{% url 'dersler:program_tablo_duzenle' %}" class="btn btn-primary btn-lg mx-2 px-4">
                    📅 Ders Programı Düzenle
                </a>
            </div>
        </div>

    {% elif user.role == "diger" %}
        <div class="row mb-4">
            <div class="col-md-6 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">Görevim</h6>
                    </div>
                    <div class="card-body text-center">
                        <h5>{{ user.gorev }}</h5>
                        <small>Aktif görev</small>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <div class="card text-white h-100 gradient-bg shadow">
                    <div class="card-header border-0">
                        <h6 class="card-title mb-0">Bildirimler</h6>
                    </div>
                    <div class="card-body text-center">
                        <h2>0</h2>
                        <small>Bekleyen bildirim</small>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12 text-center">
                <a href="#" class="btn btn-gradient-primary btn-lg mx-2 px-4">🔧 Arıza Bildirimi</a>
                <a href="#" class="btn btn-warning btn-lg mx-2 px-4">📋 Günlük Rapor</a>
                <a href="#" class="btn btn-info btn-lg mx-2 px-4">📅 Vardiya Programı</a>
                <a href="{% url 'duyurular:duyuru_listesi' %}" class="btn btn-warning btn-lg mx-2 px-4">📢 Duyurular</a>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header">
                        <h6>Personel Bilgileri</h6>
                    </div>
                    <div class="card-body">
                        <p><strong>Ad Soyad:</strong> {{ user.first_name }} {{ user.last_name }}</p>
                        <p><strong>Görev:</strong> {{ user.gorev }}</p>
                        <p><strong>Sigorta No:</strong> {{ user.sigorta_no|default:"Belirtilmemiş" }}</p>
                        <p><strong>İşe Başlama:</strong> {{ user.join_date|date:"d.m.Y" }}</p>
                    </div>
                </div>
            </div>
        </div>
    
    {% endif %}

</div>
{% endblock %}