{% extends 'base.html' %}
{% load program_filters %}

{% block content %}
<div class="container-fluid mt-4">
    <h3 class="text-center mb-4">ðŸ“… Ders ProgramlarÄ±</h3>
    
    <!-- SÄ±nÄ±f SeÃ§imi -->
    <form method="get" class="mb-4">
        <div class="row justify-content-center">
            <div class="col-md-3">
                <select name="sinif_seviye" class="form-control">
                    <option value="1" {% if sinif_seviye == '1' %}selected{% endif %}>1. SÄ±nÄ±f</option>
                    <option value="2" {% if sinif_seviye == '2' %}selected{% endif %}>2. SÄ±nÄ±f</option>
                    <option value="3" {% if sinif_seviye == '3' %}selected{% endif %}>3. SÄ±nÄ±f</option>
                    <option value="4" {% if sinif_seviye == '4' %}selected{% endif %}>4. SÄ±nÄ±f</option>
                    <option value="5" {% if sinif_seviye == '5' %}selected{% endif %}>5. SÄ±nÄ±f</option>
                    <option value="6" {% if sinif_seviye == '6' %}selected{% endif %}>6. SÄ±nÄ±f</option>
                    <option value="7" {% if sinif_seviye == '7' %}selected{% endif %}>7. SÄ±nÄ±f</option>
                    <option value="8" {% if sinif_seviye == '8' %}selected{% endif %}>8. SÄ±nÄ±f</option>
                </select>
            </div>
            <div class="col-md-3">
                <select name="sube" class="form-control">
                    <option value="A" {% if sube == 'A' %}selected{% endif %}>A Åžubesi</option>
                    <option value="B" {% if sube == 'B' %}selected{% endif %}>B Åžubesi</option>
                    <option value="C" {% if sube == 'C' %}selected{% endif %}>C Åžubesi</option>
                    <option value="D" {% if sube == 'D' %}selected{% endif %}>D Åžubesi</option>
                </select>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-primary btn-block">GÃ¶ster</button>
            </div>
        </div>
    </form>

    <h5 class="text-center text-muted mb-4">{{ sinif_seviye }}{{ sube }} SÄ±nÄ±fÄ±</h5>
    
    <!-- Program Tablosu -->
    <div class="table-responsive">
        <table class="table table-bordered text-center">
            <thead class="table-dark">
                <tr>
                    <th style="width: 120px;">Saat</th>
                    {% for gun in gunler %}
                        <th>{{ gun|title }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for saat in saatler %}
                    <tr>
                        <td class="align-middle"><strong>{{ saat }}. Ders</strong><br>
                            <small>
                                {% if saat == '1' %}08:00-08:45
                                {% elif saat == '2' %}09:00-09:45
                                {% elif saat == '3' %}10:00-10:45
                                {% elif saat == '4' %}11:00-11:45
                                {% elif saat == '5' %}13:00-13:45
                                {% elif saat == '6' %}14:00-14:45
                                {% endif %}
                            </small>
                        </td>
                        {% for gun in gunler %}
                            {% with key=gun|add:"_"|add:saat %}
                                {% with prog=program_data|get_item:key %}
                                    {% if prog %}
                                        <td class="text-white {{ prog.ders.renk }}" style="vertical-align: middle;">
                                            <strong>{{ prog.ders.ad }}</strong>
                                            {% if prog.ogretmen %}
                                                <br><small>{{ prog.ogretmen.get_full_name }}</small>
                                            {% endif %}
                                        </td>
                                    {% else %}
                                        <td class="table-light">-</td>
                                    {% endif %}
                                {% endwith %}
                            {% endwith %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}